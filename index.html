<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Formação de Times</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
body {
  font-family: "Poppins", Arial, sans-serif;
  background: radial-gradient(circle at center,#0c0c0c 40%,#000 100%);
  color:#fff;
  margin:0;
  min-height:100vh;
  display:flex;
  flex-direction:column;
  align-items:center;
  padding:25px 10px 80px;
}
h1 {font-size:clamp(1.4rem,3vw,2.2rem); margin-bottom:20px;color:#00ff99;text-shadow:0 0 12px #00ff88;text-align:center;}
.grid {display:grid; grid-template-columns:repeat(auto-fit,minmax(280px,1fr)); gap:20px; justify-content:center; width:100%; max-width:1300px; margin-bottom:30px;}
.card {background:linear-gradient(145deg,#111 0%,#1a1a1a 100%); border-radius:20px; padding:15px; box-shadow:0 0 15px rgba(0,255,136,0.2); position:relative;}
h3 {color:#00ff88;margin-bottom:5px;font-size:clamp(1rem,2.5vw,1.3rem); text-align:center; cursor:pointer;}
.media {position:absolute; top:10px; right:15px; background: rgba(0,255,136,0.15); color:#00ff88; font-weight:bold; padding:6px 10px; border-radius:10px; font-size:clamp(0.85rem,2vw,1rem);}
canvas {width:100%!important;height:auto!important; max-width:300px;margin:10px auto; display:block;}
.time-info {margin-bottom:15px;}
.time-card {display:flex; align-items:flex-start; gap:15px; position:relative; flex-wrap:wrap;}
.jogadores-lista {display:flex; flex-direction:column; max-width:140px;}
.jogadores-lista div {padding:4px 6px; background: rgba(0,255,136,0.1); border-radius:6px; font-size:0.9rem; cursor:pointer; margin-bottom:3px; text-align:center; display:flex; justify-content:space-between; align-items:center;}
.jogadores-lista div span {color:red; font-weight:bold; margin-left:6px; cursor:pointer;}
.lider {font-weight:bold; font-size:1rem; color:#FFD700; text-align:center; margin-bottom:5px;}
@media (max-width: 600px) {
  .time-card {flex-direction:column; align-items:center;}
  .jogadores-lista {max-width:100%; flex-direction:row; flex-wrap:wrap; justify-content:center;}
  .jogadores-lista div {margin:3px; font-size:0.8rem; padding:3px 5px;}
}
</style>
</head>
<body>

<h1>Formar até 5 Times</h1>

<div class="time-info">
  <span>Time Atual: </span>
  <select id="timeSelect">
    <option value="0">Time-Wendel</option>
    <option value="1">Time-Eric</option>
    <option value="2">Time-Theu</option>
    <option value="3">Time-Romulo</option>
    <option value="4">Time-HenriGol</option>
  </select>
</div>

<div class="grid" id="cardsContainer"></div>

<h2 style="color:#00ff88;">Times Criados</h2>
<div class="grid" id="timesContainer"></div>

<script>
const atributos = ['Defesa','Ataque','Habilidade','Velocidade','Passe'];

// Lista de jogadores
let jogadores = [
  ['Joel',13,0,11,7,0], ['Marcão',14,1,0,10,8], ['João',2,0,0,7,0],
  ['Wendel',0,9,1,6,13], ['HenriGol',0,13,0,0,9], ['Edmilson',14,0,0,3,4],
  ['Pedro',15,1,9,9,10], ['Israel',1,5,8,6,7], ['Sávio',16,0,0,0,0],
  ['Beninha',13,0,1,1,0], ['Peixe',15,4,13,12,10], ['Noronha',0,10,11,2,11],
  ['Maicon',2,12,13,14,11], ['Eric',2,10,12,10,14], ['Jhon 100%',0,16,0,0,1],
  ['Fabinho',13,0,0,1,9], ['João Bernardo',12,3,0,5,4], ['Danilo DN',1,12,9,8,1],
  ['Karleandro',13,0,0,0,0], ['Santiago',0,8,1,11,0], ['Diego',5,13,13,10,12],
  ['Romulo',0,10,11,13,12], ['Luis Henrique',5,5,10,4,13], ['Theu',1,15,13,13,0],
  ['Júnior',15,1,1,3,1], ['Corinthians',11,0,1,0,4], ['Caetano',16,0,7,1,6],
  ['Bicudo',16,0,0,1,9], ['Kaio Kross',12,0,0,5,0], ['Danilo Plotter',1,10,4,4,2],
  ['Henrique Barbeiro',8,10,13,4,10], ['Alex',1,15,15,16,12], ['Vitinho',0,11,15,14,7],
  ['Edmilson Novais',8,5,3,5,4], ['Samuel',1,4,9,0,3], ['RayGol',8,0,0,0,0]
];
jogadores = jogadores.map(j => [...j, (j[1]+j[2]+j[3]+j[4]+j[5])/5]);

const container = document.getElementById('cardsContainer');
const timesContainer = document.getElementById('timesContainer');
const timeSelect = document.getElementById('timeSelect');

const radarOptions = {
  scales: {
    r: { min:0, max:16, ticks:{stepSize:2,color:'#fff',backdropColor:'transparent'},
         grid:{color:'rgba(255,255,255,0.15)'}, angleLines:{color:'rgba(255,255,255,0.1)'}, pointLabels:{color:'#fff', font:{size:12}} }
  },
  plugins: { legend:{display:false}, tooltip:{enabled:true, backgroundColor:'#00FF88', titleColor:'#000', bodyColor:'#000', callbacks:{label:ctx=>`${ctx.label}: ${ctx.formattedValue}`}} },
  elements:{line:{tension:0.2}}
};

// Inicializa times e líderes fixos
let times = JSON.parse(localStorage.getItem('times')) || [[],[],[],[],[]];
const lideresFixos = ['Wendel','Eric','Theu','Romulo','HenriGol'];

// Salvar no localStorage
function salvarTimes() {
  localStorage.setItem('times', JSON.stringify(times));
}

// Criar card de jogador
function criarCard(nome,data,media,cor='#00FF88'){
  if(times.some(time => time.some(j => j[0] === nome))) return; // já está em um time
  if(document.getElementById(`card_${nome}`)) return;
  const card=document.createElement('div');
  card.classList.add('card');
  card.id = `card_${nome}`;
  const canvasId=`chart_${nome.replace(/\s+/g,'_')}_${Math.random().toString(36).substr(2,5)}`;
  card.innerHTML=`<div class="media">${media.toFixed(1)}</div><h3>${nome}</h3><canvas id="${canvasId}"></canvas>`;
  container.appendChild(card);

  new Chart(document.getElementById(canvasId), {
    type:'radar',
    data:{ labels:atributos, datasets:[{ data:data, borderColor:cor, backgroundColor:'rgba(0,255,136,0.25)', borderWidth:2, pointBackgroundColor:cor }] },
    options: radarOptions
  });

  card.querySelector('h3').addEventListener('click', ()=>{
    const t = parseInt(timeSelect.value);
    if(times[t].length>=7){ alert('Time completo! Máximo 7 jogadores.'); return;}
    times[t].push([nome, ...data]);
    card.remove();
    atualizarTimes();
    salvarTimes();
  });
}

// Atualizar times
function atualizarTimes(){
  timesContainer.innerHTML='';

  times.forEach((time,j)=>{
    if(time.length>0){
      const soma=[0,0,0,0,0];
      time.forEach(jog=>{ for(let i=0;i<5;i++) soma[i]+=jog[i+1]; });
      const mediaAttr=soma.map(v=>v/time.length);
      const mediaGeral=mediaAttr.reduce((a,b)=>a+b,0)/5;

      const card=document.createElement('div');
      card.classList.add('card','time-card');

      const liderDiv = document.createElement('div');
      liderDiv.classList.add('lider');
      liderDiv.innerText = `Líder: ${lideresFixos[j]}`;
      card.appendChild(liderDiv);

      const lista = document.createElement('div');
      lista.classList.add('jogadores-lista');
      for(let i=0;i<time.length;i++){
        const jog = time[i];
        const item = document.createElement('div');
        item.innerHTML = `${jog[0]} <span>X</span>`;
        item.querySelector('span').addEventListener('click', ()=>{
          times[j].splice(i,1);
          salvarTimes();
          atualizarTimes();
        });
        lista.appendChild(item);
      }
      card.appendChild(lista);

      const canvas = document.createElement('canvas');
      const canvasId = `chart_time_${j}_${Math.random().toString(36).substr(2,5)}`;
      canvas.id = canvasId;
      card.appendChild(canvas);

      const mediaDiv = document.createElement('div');
      mediaDiv.classList.add('media');
      mediaDiv.innerText = mediaGeral.toFixed(1);
      card.appendChild(mediaDiv);

      const titulo = document.createElement('h3');
      titulo.innerText = `Time ${j+1}`;
      card.appendChild(titulo);

      timesContainer.appendChild(card);

      new Chart(document.getElementById(canvasId), {
        type:'radar',
        data:{ labels:atributos, datasets:[{ data:mediaAttr, borderColor:'#FFD700', backgroundColor:'rgba(255,221,0,0.25)', borderWidth:2, pointBackgroundColor:'#FFD700' }] },
        options: radarOptions
      });
    }
  });

  // recria cards para jogadores livres
  jogadores.forEach(j=>{
    const emTime = times.some(time => time.some(jog => jog[0] === j[0]));
    if(!emTime) criarCard(j[0], j.slice(1,6), j[6]);
  });
}

// inicializa
atualizarTimes();
</script>
</body>
</html>
